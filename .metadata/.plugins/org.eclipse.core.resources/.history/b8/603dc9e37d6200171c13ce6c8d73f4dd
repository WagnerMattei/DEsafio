package com.eits.desafio.infraestructure;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Component;

import com.eits.desafio.domain.entity.Usuario;

@Component
public class Mailer 
{
	
	@Autowired
	private JavaMailSender mailSender;
	
	public void send(Usuario usuario)
	{
		SimpleMailMessage mensagem = new SimpleMailMessage();
		mensagem.setFrom("wagner.mattei@gmail.com");
		mensagem.setTo(usuario.getEmail());
		mensagem.setSubject("Cadastro realizado com sucesso!");
		mensagem.setText("Obrigado por relizar o cadastro\n "+ 
				   "Usuario: " + usuario.getEmail() +"\n"+ 
				   "Senha: " + usuario.getPassword()+ "\n" +
				   "Com permiss√µes de "+ usuario.getPermissoes()+"\n"+
				   "----------------------------------------");
		
		mailSender.send(mensagem);
		
	}

}